# VMDK-Migration
Scripts to assist in a mass storage migration utilizing svMotion.  This is a three step process involving 3 PowerShell scripts, two of which you can find here and the third will be generated by the second script.  The first script will export Hard Disks assigned to VMs in a CSV.  The user can then modify the CSV to include a target datastore for the migration process.  The CSV will then be ingested by the second script, which will then output a third script which will run each migration individually on a line-by-line basis.

### [Export-VMDKs.ps1](https://github.com/aderusha/VMDK-Migration/blob/master/Export-VMDKs.ps1)
This script utilizes [PowerCLI](https://www.vmware.com/support/developer/PowerCLI/) to export a list of VM Hard Disk objects in the specified vCenter Datacenter to a CSV file.  The resulting CSV can be used to manually map out target Datastore objects for each HDD found in each VM.  The CSV is then used as an input to the second script below.

The beginning of the file defines some required values for execution.  Enter the name of your vCenter host and target Datacenter as appropriate for your environment.

### [Create-MigrationScript.ps1](https://github.com/aderusha/VMDK-Migration/blob/master/Create-MigrationScript.ps1)
This script will ingest the CSV file created by [Export-VMDKs.ps1](https://github.com/aderusha/VMDK-Migration/blob/master/Export-VMDKs.ps1) to generate a migration script.

### Migrate-VMDKs.ps1
This script will be generated by [Create-MigrationScript.ps1](https://github.com/aderusha/VMDK-Migration/blob/master/Create-MigrationScript.ps1).  The script will migrate a single VM HDD on each line of the script.  The resulting script can be split up or scheduled to run as needed.